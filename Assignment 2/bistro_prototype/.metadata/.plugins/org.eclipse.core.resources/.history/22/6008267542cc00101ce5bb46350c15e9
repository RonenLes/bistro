package server;

import ocsf.server.*;
import common.*;

public class BistroEchoServer extends AbstractServer  {
	
	private ReservationController reservationController;
	
	public BistroEchoServer(int port) {
		super(port);
	}
	
	@Override
	protected void handleMessageFromClient(Object msg ,ConnectionToClient client) {
		
		
		
		if(msg instanceof ReservationRequest) {
			ReservationRequest request = (ReservationRequest)msg;
			
			Object response;
			
			try {
				response = reservationController.addReservation(request);
				client.sendToClient(response);
			}catch(Exception e) {
				System.err.println("Error with requesting new reservations");
				client.sendToClient(new Error("Falied to complete reservation request"));
			}
		}
		
		if(msg instanceof EditReservationRequest) {
			EditReservationRequest request = (EditReservationRequest)msg;
			object response;
			try {
				response = reservationController.editReservation(request);
				client.sendToClient(response);
			}
		}
		
	}
	
	
}
